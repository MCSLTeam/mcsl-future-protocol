# 权限

## 什么是权限 {#definition}

<tip>
权限的给予、权限列表等可以在WPF或Web的用户管理页面中进行操作
</tip>

**权限（Permission）**，在MCSL中类似于Bukkit权限，是一种以名称的形式定义每个用户能够访问的内容、执行的操作等的方法。

它们可用于允许用户访问实例、配置等或插件定义的一些其他内容。

例如：给予用户`mcsl.daemon.instance.create`权限就能使用户能够创建实例。

## 权限节点 {#nodes}

<tip>
权限的正则表达式为`/^(([a-zA-Z-_]+|\*{1,2})\.)*([a-zA-Z-_]+|\*{1,2})$/`*
</tip>

**权限节点（Permission node）** 是组成权限的要素，一个权限由许多个节点组成，节点之间由`.`分割。

节点仅可由大小写字母、连字符（`-`）和下划线（`_`）组成。

例如：`a.b.c`就是由`a`、`b`和`c`这3个节点组成的。并且我们可以说`b`是`a`的**子节点**，`a`是`b`的**父节点**。

父节点包含了其子节点的全部权限，例如：如果用户拥有`mcsl.daemon.myserver.action`
权限，他就能够访问需要`mcsl.daemon.myserver.action.start`、`mcsl.daemon.myserver.action.stop`
等权限的内容，即可以对`myserver`实例进行开启、关闭等操作。

## 权限匹配 {#matching}

在用户访问某个需要权限的内容时，程序将会进行**权限匹配**来检查用户可否访问，如果权限匹配成功用户即可访问。

### 匹配规则 {#matching-rules}

#### 完全匹配 {#full-match}

如果用户拥有某个权限与需要的权限相同时匹配。

例如：用户拥有权限`a.b`且需要`a.b`权限时匹配

#### 父节点匹配子节点 {#children-match}

如果用户拥有某个权限是需要的权限的父节点时匹配。

例如：用户拥有权限`a.b`且需要`a.b.c`权限时匹配

### 通配符 {#wildcard-match}

通配符是一种特殊节点，可以模糊匹配权限。

#### 任何单个节点`*` {#wildcard-single-node}

`*`代表**任何单个节点**，仅可单独作为节点名称出现。

例如：`a.*.c`是正确的，`a.b*.c`是错误的。

`*`可以顶替任何单个节点，如：用户拥有权限`a.*`且需要`a.b`权限时匹配

当然，**父节点匹配子节点**的匹配规则同样适用，如：用户拥有权限`a.*.c`且需要`a.b.c.d`权限时匹配。

#### 任何节点`**` {#wildcard-any-node}

`**`代表**任何节点**，仅可单独作为节点名称出现。

例如：`a.**.c`是正确的，`a.b**.c`是错误的。

`**`可以顶替任何节点，如：用户拥有权限`a.**`且需要`a.b`或`a.b.c`权限时匹配

当然，**父节点匹配子节点**的匹配规则同样适用，如：用户拥有权限`a.**.d`且需要`a.b.c.d.e`权限时匹配。

<warning>
用户拥有权限 a.b.**.c 且需要 a.b.c 权限时将不会匹配
</warning>