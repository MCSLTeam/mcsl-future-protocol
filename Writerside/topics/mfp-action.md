# 操作

**操作（Action）** 是客户端主动发起的请求，服务器在收到请求后将会将结果返回给客户端。

## 通讯方式

客户端要执行操作时，会请求带有 **操作名称** 和 **参数** 的信息。
服务端接收到请求时，会响应带有 **操作结果** 或 **错误信息** 的信息。

### 请求字段

|   字段   | 数据类型 |                        说明                         |
|:------:|:----:|:-------------------------------------------------:|
| action | str  |       操作名称，使用下划线命名法，如 `file_upload_request`       |
| params | any  |                   操作参数，可选，因操作而异                   |
|   id   | bin8 | 操作编号，16字节，类型为 UUID v4；<br/>响应也包含一个 `id` 字段，它们的值相同 |

### 成功响应字段

|   字段   | 数据类型 |          说明          |
|:------:|:----:|:--------------------:|
|   id   | bin8 | 操作编号，与请求中的 `id` 字段相同 |
| result | any  |    操作结果，可选，因操作而异     |

### 失败响应字段

#### 执行失败

若成功解析请求，但执行操作时发生错误，则返回以下信息：

|  字段   |  数据类型  |                说明                |
|:-----:|:------:|:--------------------------------:|
|  id   |  bin8  |       操作编号，与请求中的 `id` 字段相同       |
| error | uint16 | 错误代码，见 [](mfp-action-errcode.md) |

#### 解析失败

若无法解析发送的信息（如格式错误等），则返回以下信息：

|   字段    |  数据类型  |        说明         |
|:-------:|:------:|:-----------------:|
|  error  | uint16 | 错误代码，应始终为 `10001` |
| request |  str   |       发送的信息       |
